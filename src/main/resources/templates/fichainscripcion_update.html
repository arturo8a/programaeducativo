<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ProgramaEducativo</title>
    <script type="text/javascript">
		window.history.forward();
	</script>

    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <!-- Our Custom CSS -->
    <link rel="stylesheet" href="../static/css/style.css" th:href="@{/css/style.css}">
	
    <!-- Font Awesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>
	
	<!-- jQuery CDN - Slim version (=without AJAX) -->
    <!-- script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script-->
    <!-- Popper.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
	
	<link rel="stylesheet" href="../static/css/dataTables.bootstrap4.min.css" th:href="@{/css/dataTables.bootstrap4.min.css}">
	<link rel="stylesheet" href="../static/css/responsive.bootstrap4.min.css" th:href="@{/css/responsive.bootstrap4.min.css}">
	<link rel="stylesheet" href="../static/css/editor.dataTables.min.css" th:href="@{/css/editor.dataTables.min.css}">
	<link rel="stylesheet" href="../static/css/select.dataTables.min.css" th:href="@{/css/select.dataTables.min.css}">
	<link rel="stylesheet" href="../static/css/buttons.dataTables.min.css" th:href="@{/css/buttons.dataTables.min.css}">
	<link rel="stylesheet" href="../static/css/colReorder.dataTables.min.css" th:href="@{/css/colReorder.dataTables.min.css}">
	
	<script type="text/javascript" th:src="@{/js/jquery-3.3.1.js}" ></script>
    <script type="text/javascript" th:src="@{/js/bootstrapv4.js}" ></script>
    <script type="text/javascript" th:src="@{/js/fontawesomev5.0.6.js}" ></script>
    <script type="text/javascript" th:src="@{/js/jquery-ui.js}" ></script>
    <script type="text/javascript" th:src="@{/js/aperturar_anio.js}" ></script>
	
	<script type="text/javascript" th:src="@{/js/bootstrap-select.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/fontawesomev5.0.6.js}"></script>
    <script type="text/javascript" th:src="@{/js/jquery.dataTables.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/dataTables.editor.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/dataTables.select.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/dataTables.colReorder.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/dataTables.buttons.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/jszip.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/pdfmake.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/vfs_fonts.js}"></script>
    <script type="text/javascript" th:src="@{/js/buttons.html5.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/buttons.print.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/dataTables.bootstrap4.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/dataTables.responsive.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/responsive.bootstrap4.min.js}"></script>      
    <script type="text/javascript" th:src="@{/js/dataTables.editor.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/datetime.js}"></script>
    <script type="text/javascript" th:src="@{/js/moment.min.js}"></script>
	<script type="text/javascript" th:src="@{/js/datetime-moment.js}"></script>	
	
	<link rel="shortcut icon" th:href="@{/images/logo_login.ico}" />
	
	<script type="text/javascript" th:src="@{/js/jquery-ui.js}" ></script>
	
	<link rel="stylesheet" href="../static/css/style.css" th:href="@{/css/style.css}">
	<link href="../static/css/gijgo.min.css" rel="stylesheet" th:href="@{/css/gijgo.min.css}" >
	<script type="text/javascript" th:src="@{/js/gijgo.min.js}" ></script>
	<script type="text/javascript" th:src="@{/js/messages.es-es.js}"></script>
	<script type="text/javascript" th:src="@{/js/datetime-moment-order.js}"></script>
	<script type="text/javascript" th:src="@{/js/moment.js}"></script>
	
	<script type="text/javascript" th:src="@{/js/date-uk.js}"></script>
	<script type="text/javascript" th:src="@{/js/date-euro.js}"></script>
	
</head>
<body>

<div style="margin-top:-20px">
	<div style="width:100%" class="text-right"><input type="button" value="Ir al inicio" id="inicioconcurso1" class="btn btn-primary"/></div>
	<br>
	<h4 style="color:#4698FF; padding-left:5px">FICHA INSCRIPCION AL CONCURSO ESCOLAR NACIONAL</h4>
	<br>
	<div style="margin:15px">
		
		<ul class="nav nav-tabs" id="myTab" role="tablist">
		  <li class="nav-item">
		    <a class="nav-link active" id="docente-tab" data-toggle="tab" href="#docente" role="tab" aria-controls="home" aria-selected="true">Datos del Docente</a>
		  </li>
		  <li class="nav-item">
		    <a class="nav-link" id="participante-tab" data-toggle="tab" href="#participante" role="tab" aria-controls="participante" aria-selected="false">2. Datos de los participantes</a>
		  </li>
		  <li class="nav-item" >
		    <a class="nav-link" id="trabajosfinales-tab" data-toggle="tab" href="#trabajosfinales" role="tab" aria-controls="trabajosfinales" aria-selected="false">3. Registro de Trabajos Finales</a>
		  </li>
		</ul>
		
		<div class="tab-content" id="myTabContent">	
			<div class="tab-pane fade show active" id="docente" role="tabpanel" aria-labelledby="docente-tab">
					  	<br><br>
					  	<div class="row">
					  		<div class="col-12 text-left">
					  			<strong>Código de local I.E.</strong>	
					  			<div class="ui-widget">
					  				<input type="hidden" th:value="${docentetutor.programaeducativo.id}" id="idprogramaeducativo" />
					  				<input type="hidden" th:value="${docentetutor.id}" id="id" />
					  				<input type="hidden" th:value="${docentetutor.anio}" id="anio" />
					  				<input type="text" id="codmod" style="width:100%" class="form-control" th:value="${codmod}" disabled />
					  			</div>
					  		</div>
					  	</div>
					  	<br>
						  <div class="row">
						  		<div class="col-4 text-left">
						  			<label>Apellido paterno</label>	
						  			<input type="text" id="appaterno" class="form-control" style="width:100%" th:field="*{docentetutor.appaterno}"/>
						  		</div>
						  		<div class="col-4 text-left">
						  			<label>Apellido materno</label>	
						  			<input type="text" id="apmaterno" class="form-control" style="width:100%" th:field="*{docentetutor.apmaterno}"/>
						  		</div>
						  		<div class="col-4 text-left">
						  			<label>Nombres</label>	
						  			<input type="text" id="nombre" class="form-control" style="width:100%" th:field="*{docentetutor.nombre}"/>
						  		</div>
						  </div>
						  <br>
						  <div class="row">
						  		<div class="col-4 text-left">
						  			<label>Tipo de documento</label>	
						  			<select class="form-control" id="tipodocumento" th:field="*{docentetutor.tipodocumento}">
						  				<option value="">Seleccione</option>
				                        <option th:each="len:${tipodoc}" th:value="${len.id}" th:utext="*{len.descripcion}"/>
						  			</select>
						  		</div>
						  		<div class="col-4 text-left">
						  			<label>N° de documento</label>	
						  			<input type="text" id="nrodocumento" style="width:100%" class="form-control" th:field="*{docentetutor.nrodocumento}"/>
						  		</div>
						  		<div class="col-4 text-left">
						  			<label>Género</label>	
						  			<select class="form-control" id="genero" th:field="*{docentetutor.genero}">
						  				<option value="">Seleccione</option>
				                        <option th:each="len:${genero}" th:value="${len.id}" th:utext="*{len.descripcion}"/>
						  			</select>
						  		</div>
						  </div>
						  <br>
						  <div class="row">
						  		<div class="col-4 text-left">
						  			<label>N° de teléfono</label>	
						  			<input type="text" id="nrotelefono" style="width:100%" class="form-control" th:field="*{docentetutor.nrotelefono}"/>
						  		</div>
						  		<div class="col-4 text-left">
						  			<label>Correo electrónico</label>	
						  			<input type="text" id="correoelectronico" style="width:100%" class="form-control" th:field="*{docentetutor.correoelectronico}"/>
						  		</div>
						  		<div class="col-4 text-left">
						  			<label>Responsable de registro</label>	
						  			<select class="form-control" id="responsable" th:field="*{docentetutor.responsable}">
						  				<option value="">Seleccione</option>
				                        <option th:each="len:${responsableregistro}" th:value="${len.id}" th:utext="*{len.descripcion}"/>
						  			</select>
						  		</div>
						  </div>
					  		<br>
						  <div class="row">
						  		<div class="col-4 text-left">
						  			<label>Curso</label>	
						  			<input type="text" id="curso" style="width:100%" class="form-control" th:field="*{docentetutor.curso}"/>
						  		</div>
						  		<div class="col-4">
						  			&nbsp;
						  		</div>
						  		<div class="col-4">
						  			&nbsp;
						  		</div>
						  </div>
						  <br>
						  	<div class="row">
						  		<div class="col-4">
						 				&nbsp;
						 			</div>
						 			<div class="col-4">
						 				<input type="button" value="Guardar" id="btnguardarficha" class="btn btn-primary text-white rounded-0"/>
								</div>
								<div class="col-4">
									<input type="button" value="Cancelar" id="btncancelarficha" class="btn btn-danger text-white rounded-0"/>
						 		</div>
						  	</div>
						  	<br><br><br>	  
			  	</div>
			<div class="tab-pane fade" id="participante" role="tabpanel" aria-labelledby="participante-tab">
				<div  id="container_participante">
					<label>Esta opción aún no se encuentra disponible, pronto se habilitará esta sección para el ingreso de datos de sus estudiantes participantes del Concurso, recuerda que debes adjuntar además la autorización de cada padre de familia junto con el registro. Descarga el formato de autorización <a href="/pedesa/reportes/AUTORIZACIÓNDEPADREPARAPARTICIPACIONVIIICONCURSO.docx" download style="color:blue">Aqu&iacute;</a></label>
					<br>
					<input type="button" value="Ir al inicio" id="inicioconcurso"/>
					<!-- div class="row">
						<div class="col text-right">
							<input type="button" value="Agregar participante" id="agregarparticipante" class="btn btn-primary  mr-3">
						</div>
					</div>
					<div class="row pt-2 pb-4 m-0">
						<div class="col-xs-12 col-sm-12">
							<table id="table_lista_participantes"  class="table table-striped table-bordered display nowrap" style="width:100%">
								<thead>
							        <tr>
							        	<th>Nº</th>
							            <th>Apellido paterno</th>
							            <th>Apellido materno</th>
							            <th>Nombres</th>
							            <th>Tipo de documento</th>
							            <th>N° de documento</th>
							            <th>Categoría(s)</th>
							            <th>Modalidad(s)</th>
							            <th>Ficha de autorización</th>
							            <th>Ver</th>
							            <th>Editar</th>
							            <th>Eliminar</th>
							        </tr>   
							    </thead>
							</table>
						</div>
					</div-->	
				</div>
			</div>		
			<div class="tab-pane fade show" id="trabajosfinales" role="tabpanel" aria-labelledby="trabajosfinales-tab" >			
			</div>
		</div>
	</div>
</div>
<div class="modal" tabindex="-1" role="dialog" id="modalexito">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <img th:src="@{./images/imagen_exito5.png}"/>&nbsp;&nbsp; <strong class="pt-1">Registro exitoso</strong>
      </div>
      <div class="modal-body" id="textoexito">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary rounded-0" id="btncerrarmensajeexito" name="btncerrarmensajeexito">Aceptar</button>
      </div>
    </div>
  </div>
</div>

<div class="modal" tabindex="-1" role="dialog" id="modalconfirmacion">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <img th:src="@{./images/imagen_informacion11.png}" />&nbsp;&nbsp; <strong class="pt-1">Confirmacion</strong>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id="textoconfirmacion">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary rounded-0" id="btnaceptarmensajeconfirmacion" name="btnaceptarmensajeconfirmacion">Aceptar</button>
        <button type="button" class="btn btn-danger rounded-0" id="btncerrarmensajeconfirmacion" name="btncerrarmensajeconfirmacion">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<div class="modal" tabindex="-1" role="dialog" id="modalinformacion">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <img th:src="@{./images/imagen_informacion11.png}" />&nbsp;&nbsp; <strong class="pt-1">Alerta</strong>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id="textoinformacion">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger rounded-0" id="btncerrarmensajeinformacion" name="btncerrarmensajeinformacion">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<div class="modal" tabindex="-1" role="dialog" id="modalerror">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <img th:src="@{./images/imagen_informacion11.png}"/>&nbsp;&nbsp; <strong class="pt-1">Error</strong>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>	          
        </button>
      </div>
      <div class="modal-body" id="textoerror">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger rounded-0" id="btncerrarmensajeerror" name="btncerrarmensajeerror">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<div class="modal" tabindex="-1" role="dialog" id="modalimagencargando">
  <center>
  	<img th:src="@{./images/cargando.gif}" style="line-height: 200px;"/>
  </center>	  
</div>	
</body>
</html>

<script type="text/javascript">
	
	var url_base = location.origin+"/";
	var table_lista_participantes,mensajeValidacion;
	
	$(document).ready(function(){	
		
		$("#participante-tab").prop('disabled',true);
		
		$("#btncerrarmensajeexito").click(function(){			
			$("#modalexito").modal('hide');
		});
			
		$("#btncerrarmensajeinformacion").click(function(){
			$("#modalinformacion").modal('hide');
		});
		
		$("#btncerrarmensajeerror").click(function(){
			$("#modalerror").modal('hide');
		});
		
		$("#inicioconcurso1").click(function(){
			$("#modalimagencargando").modal({
				show : true,
				backdrop : 'static',
				keyboard:false
			});
			$.ajax({
				url: url_base + "pedesa/menu_concurso",
				success: function(respuesta) {
					$("#modalimagencargando").modal('hide');
					$("#container").html(respuesta);
				},
				error: function() {
			        console.log("No se ha podido obtener la información");
			    }
			});
		});
		
		$("#inicioconcurso").click(function(){
			$("#modalimagencargando").modal({
				show : true,
				backdrop : 'static',
				keyboard:false
			});
			$.ajax({
				url: url_base + "pedesa/menu_concurso",
				success: function(respuesta) {
					$("#modalimagencargando").modal('hide');
					$("#container").html(respuesta);
				},
				error: function() {
			        console.log("No se ha podido obtener la información");
			    }
			});
		});
		
		$("#fechanacimientoestudiante").datepicker({
			locale: 'es-es',
		    format: 'dd/mm/yyyy',
		    uiLibrary: 'bootstrap4'
		});
		
		$("#btnguardarficha").click(function(){
			
			if(validarCampos()){	
				
				var id = $("#id").val();
				var anio = $("#anio").val();
				var appaterno = $("#appaterno").val();
				var apmaterno = $("#apmaterno").val();
				var nombre = $("#nombre").val();
				var tipodocumento = $("#tipodocumento").val();
				var nrodocumento = $("#nrodocumento").val();
				var genero =  $("#genero").val();
				var nrotelefono =  $("#nrotelefono").val();
				var correoelectronico =  $("#correoelectronico").val();
				var responsable =  $("#responsable").val();
				var curso = $("#curso").val();
				var idprogramaeducativo = $("#idprogramaeducativo").val();
				
				var obj = {
						id: id,
						appaterno : appaterno,
						apmaterno : apmaterno,
						nombre : nombre,
						tipodocumento : {
							id :tipodocumento
						},
						nrodocumento : nrodocumento,
						genero : {
							id :genero 
						},
						nrotelefono : nrotelefono,
						correoelectronico : correoelectronico,
						responsable : {
							id :responsable
						},
						curso : curso,
						anio : anio,
						programaeducativo : {
							id : idprogramaeducativo
						}
				};	
				
				$.ajax({
					type : "POST",
				    contentType : "application/json",
				    url : url_base + "pedesa/guardardocentetutor",
				    data : JSON.stringify(obj),
				    dataType : 'json',
					success: function(respuesta) {
						
						switch(respuesta){
							case 0 : 
									$("#textoerror").html("Error al registrar Docente o tutor");
									$('#modalerror').modal({
										show : true,
										backdrop : 'static',
										keyboard:false
									});
									break;
							case 1 :  
								$("#textoexito").html("Se registro al Profesor o tutor exitosamente");
								$('#modalexito').modal({
									show : true,
									backdrop : 'static',
									keyboard:false
								});
								
								break;
						}
					},
					error: function() {
						$("#modalimagencargando").modal('hide');
						alert("Error al Registrarse en el Programa Educativo. Comunicarse con la Oficina de Tecnología de Información de Sunass");
				    }
				});
				
			}
			else{
				$("#textoinformacion").html("<div style='color:red' class='text-left'>"+mensajeValidacion+"</div>");
				$('#modalinformacion').modal({
					show : true,
					backdrop : 'static',
					keyboard:false
				});
			}
		});
		
		$("#btncerrarmensajeexito").click(function(){
			$("#modalexito").modal('hide');
			$("#participante-tab").prop('disabled',false);
			$('#myTab a[href="#participante"]').tab('show');
			listar();
		});
		
		$("#agregarparticipante").click(function(){
			
			$("#modalimagencargando").modal({
				show : true,
				backdrop : 'static',
				keyboard:false
			});
			$.ajax({
				url: url_base + "pedesa/formregistrarparticipante",
				success: function(respuesta) {
					$("#modalimagencargando").modal('hide');
					$("#container_participante").html(respuesta);
					
				},
				error: function() {
			        console.log("No se ha podido vista del web service");
			    }
			});
		});	
	});
	
	var listar = function (){
		
		$("#table_lista_participantes").dataTable().fnDestroy();
		table_lista_aperturar_anio = $('#table_lista_participantes').DataTable({
			dom: 'Bfrtip',
		    "scrollX": true,
		    "searching": true,
		    lengthMenu: [
		        [ 10, 15, 25, -1 ],
		        [ '10 filas', '15 filas', '25 filas', 'Mostrar todas' ]
		    ],
		    "processing":true,
		    language: {
		        "decimal": "",
		        "emptyTable": "No se han registrado participantes, para agregar hacer click en el botón 'Agregar paciente'",
		        "info": "Mostrando _START_ a _END_ de _TOTAL_ Entradas",
		        "infoEmpty": "Mostrando 0 a 0 de 0 Entradas",
		        "infoFiltered": "(Filtrado de _MAX_ total entradas)",
		        "infoPostFix": "",
		        "thousands": ",",
		        "lengthMenu": "Mostrar _MENU_ Entradas",
		        "loadingRecords": "Cargando Registros...",
		        "processing": "Procesando...",
		        "search": "Buscar:",
		        "zeroRecords": " ",//No existen registros
		        "paginate": {
		            "first": "Primero",
		            "last": "Ultimo",
		            "next": "Siguiente",
		            "previous": "Anterior"
		        }
		    },
		    'ajax' : {
		        "url" : url_base + 'pedesa/listaparticipantes',
		        "type" : "GET",
		        "dataSrc" : ""
		    },
		    "deferRender": true,
		    'columnDefs': [],
		    'columns' : [
		    	{ 
		    		"data": null, "render": function (data, type, full, meta) { return meta.row + 1; }
		    	},
		    	{ 'data' : 'appaterno' },
		        { 'data' : 'apmaterno' },
		        { 'data' : 'nombre' },
		        { 'data' : 'tipodocumento' },
		        { 'data' : 'nrodocumento' },
		        { 'data' : 'categoria' },
		        { 'data' : 'modalidad' },
		        { 'defaultContent' : '<img src="./images/svg/file-pdf-regular.svg" class="archivo" style="width:20px; cursor:pointer"/>' },
		        { 'defaultContent' : '<img src="./images/svg/file-pdf-regular.svg" class="ver" style="width:20px; cursor:pointer"/>' },
		        { 'defaultContent' : '<img src="./images/svg/edit-regular.svg" class="editar" style="width:20px; cursor:pointer" />'},
		        { 'defaultContent' : '<img src="./images/svg/eliminar-alt-regular.svg" class="eliminar" style="width:20px; cursor:pointer" />'}
		    ],
		    buttons: []
		});
		
		obtener_data_archivo("#table_lista_participantes tbody",table_lista_aperturar_anio);
		obtener_data_ver("#table_lista_participantes tbody",table_lista_aperturar_anio);
        obtener_data_editar("#table_lista_participantes tbody",table_lista_aperturar_anio);
        obtener_data_eliminar("#table_lista_participantes tbody",table_lista_aperturar_anio);		
	}
	
	var obtener_data_archivo = function(tbody,table){
		$(tbody).on("click","img.archivo",function(){
			celdaseleccionada = table.row($(this).parents("tr")).index();
			var data = table.row($(this).parents("tr")).data();
			id = data.id;
			archivo(id);
		});
	};
	
	var obtener_data_ver = function(tbody,table){
		$(tbody).on("click","img.ver",function(){
			celdaseleccionada = table.row($(this).parents("tr")).index();
			var data = table.row($(this).parents("tr")).data();
			id = data.id;
			verPdf(id);
		});
	};
	
	var obtener_data_editar = function(tbody,table){
		$(tbody).on("click","img.editar",function(){
			celdaseleccionada = table.row($(this).parents("tr")).index();
			var data = table.row($(this).parents("tr")).data();
			id = data.id;
			editar(id);
		});
	};
	
	var obtener_data_eliminar = function(tbody,table){
		$(tbody).on("click","img.eliminar",function(){
			celdaseleccionada = table.row($(this).parents("tr")).index();
			var data = table.row($(this).parents("tr")).data();
			id = data.id;
			eliminar(id);
		});
	};
	
	function eliminar(id){
		
		var r = confirm("¿ Está seguro de eliminar al estudiante ?");
		if (r == true) {
			$.ajax({
				type : "GET",
			    url : url_base + "pedesa/eliminarparticipanteid/"+ id,
				success: function(respuesta) {
					if(respuesta==1){
						table_lista_aperturar_anio.row(celdaseleccionada).remove().draw(false);
					}
					else{
						$("#textoerror").html("No se pudo Eliminar Participante");
						$('#modalerror').modal({
							show : true,
							backdrop : 'static',
							keyboard:false
						});
					}
				},
				error: function() {
					$("#textoerror").html("Excepcion Eliminar Participante");
					$('#modalerror').modal({
						show : true,
						backdrop : 'static',
						keyboard:false
					});
			    }
			});			
		}
	}
	
	function archivo(id){
    	
		$.ajax({
			type : "GET",
		    contentType : "application/json",
		    url : url_base + "pedesa/fichaautorizacionpdf/"+id,
			success: function(respuesta) {
				window.open(respuesta, '_blank');
			},
			error: function() {
				$("#modalimagencargando").modal('hide');
				$("#textoerror").html("Excepcion al descargar PDF");
				$('#modalerror').modal({
					show : true,
					backdrop : 'static',
					keyboard:false
				});
		    }
		});  	
    }
	
	function editar(id){
		
		$("#modalimagencargando").modal({
			show : true,
			backdrop : 'static',
			keyboard:false
		});
		
		$.ajax({
			type : "GET",
		    url : url_base + "pedesa/editarviewparticipanteid/"+ id,
			success: function(respuesta) {
				$("#modalimagencargando").modal('hide');
				$("#container_participante").html(respuesta);				
			},
			error: function() {
				$("#modalimagencargando").modal('hide');
				$("#textoerror").html("Excepcion al cargar vista editar");
				$('#modalerror').modal({
					show : true,
					backdrop : 'static',
					keyboard:false
				});
		    }
		});		
	}
	
	function verPdf(id){
    	
    	$.ajax({
			type : "GET",
		    contentType : "application/json",
		    url : url_base + "pedesa/descargarparticipantepdf/"+id,
			success: function(respuesta) {
				window.open(respuesta, '_blank');
			},
			error: function() {
				$("#modalimagencargando").modal('hide');
				$("#textoerror").html("Excepcion al descargar PDF");
				$('#modalerror').modal({
					show : true,
					backdrop : 'static',
					keyboard:false
				});
		    }
		});    	
    }
	
	function validarCampos(){
		
		mensajeValidacion = "";
		
		if($("#appaterno").val().trim()==""){
			mensajeValidacion = "Debe ingresar Apellido Paterno"+"<br>";
		}
		if($("#apmaterno").val().trim()==""){
			mensajeValidacion += "Debe ingresar Apellido Materno"+"<br>";
		}
		if($("#nombre").val().trim()==""){
			mensajeValidacion += "Debe ingresar Nombre"+"<br>";
		}
		if($("#tipodocumento").val()==""){
			mensajeValidacion += "Debe seleccionar Tipo Documento"+"<br>";
		}
		if($("#nrodocumento").val().trim()==""){
			mensajeValidacion += "Debe ingresar N° de Documento"+"<br>";
		}
		if($("#genero").val()==""){
			mensajeValidacion += "Debe Seleccionar Genero"+"<br>";
		}
		if($("#nrotelefono").val().trim()==""){
			mensajeValidacion += "Debe ingresar Número de Teléfono"+"<br>";
		}
		if($("#correoelectronico").val().trim()==""){
			mensajeValidacion += "Debe ingresar Correo Eléctronico"+"<br>";
		}
		if($("#responsable").val().trim()==""){
			mensajeValidacion += "Debe ingresar Responsable"+"<br>";
		}
		
		if(mensajeValidacion!=""){
			return false;
		}
		return true;
	}
	
	
</script>