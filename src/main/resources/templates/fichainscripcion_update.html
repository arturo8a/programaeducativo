<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ProgramaEducativo</title>
    <script type="text/javascript">
		window.history.forward();
	</script>

    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <!-- Our Custom CSS -->
    <link rel="stylesheet" href="../static/css/style.css" th:href="@{/css/style.css}">
	
    <!-- Font Awesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>
	
	<!-- jQuery CDN - Slim version (=without AJAX) -->
    <!-- script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script-->
    <!-- Popper.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
	
	<link rel="stylesheet" href="../static/css/dataTables.bootstrap4.min.css" th:href="@{/css/dataTables.bootstrap4.min.css}">
	<link rel="stylesheet" href="../static/css/responsive.bootstrap4.min.css" th:href="@{/css/responsive.bootstrap4.min.css}">
	<link rel="stylesheet" href="../static/css/editor.dataTables.min.css" th:href="@{/css/editor.dataTables.min.css}">
	<link rel="stylesheet" href="../static/css/select.dataTables.min.css" th:href="@{/css/select.dataTables.min.css}">
	<link rel="stylesheet" href="../static/css/buttons.dataTables.min.css" th:href="@{/css/buttons.dataTables.min.css}">
	<link rel="stylesheet" href="../static/css/colReorder.dataTables.min.css" th:href="@{/css/colReorder.dataTables.min.css}">
	
	<script type="text/javascript" th:src="@{/js/jquery-3.3.1.js}" ></script>
    <script type="text/javascript" th:src="@{/js/bootstrapv4.js}" ></script>
    <script type="text/javascript" th:src="@{/js/fontawesomev5.0.6.js}" ></script>
    <script type="text/javascript" th:src="@{/js/jquery-ui.js}" ></script>
	
	<script type="text/javascript" th:src="@{/js/bootstrap-select.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/fontawesomev5.0.6.js}"></script>
    <script type="text/javascript" th:src="@{/js/jquery.dataTables.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/dataTables.editor.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/dataTables.select.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/dataTables.colReorder.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/dataTables.buttons.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/jszip.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/pdfmake.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/vfs_fonts.js}"></script>
    <script type="text/javascript" th:src="@{/js/buttons.html5.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/buttons.print.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/dataTables.bootstrap4.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/dataTables.responsive.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/responsive.bootstrap4.min.js}"></script>      
    <script type="text/javascript" th:src="@{/js/dataTables.editor.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/datetime.js}"></script>
    <script type="text/javascript" th:src="@{/js/moment.min.js}"></script>
	<script type="text/javascript" th:src="@{/js/datetime-moment.js}"></script>	
	
	<link rel="shortcut icon" th:href="@{/images/logo_login.ico}" />
	
	<script type="text/javascript" th:src="@{/js/jquery-ui.js}" ></script>
	
	<link rel="stylesheet" href="../static/css/style.css" th:href="@{/css/style.css}">
	<link href="../static/css/gijgo.min.css" rel="stylesheet" th:href="@{/css/gijgo.min.css}" >
	<script type="text/javascript" th:src="@{/js/gijgo.min.js}" ></script>
	<script type="text/javascript" th:src="@{/js/messages.es-es.js}"></script>
	<script type="text/javascript" th:src="@{/js/datetime-moment-order.js}"></script>
	<script type="text/javascript" th:src="@{/js/moment.js}"></script>
	<script type="text/javascript" th:src="@{/js/fichainscripcion.js}" ></script>
	
	<script type="text/javascript" th:src="@{/js/date-uk.js}"></script>
	<script type="text/javascript" th:src="@{/js/date-euro.js}"></script>    
	
	
</head>
<body>

<div>
	<div style="width:100%" class="text-right"><input type="button" value="Ir al inicio" id="inicioconcurso1" class="btn btn-primary"/></div>
	<br>
	<h4 style="color:#4698FF; padding-left:5px">FICHA INSCRIPCION AL CONCURSO ESCOLAR NACIONAL</h4>
	<br>
	<div style="margin:15px">
		
		<ul class="nav nav-tabs" id="myTab" role="tablist">
		  <li class="nav-item">
		    <a class="nav-link active" id="docente-tab" data-toggle="tab" href="#docente" role="tab" aria-controls="home" aria-selected="true">Datos del Docente</a>
		  </li>
		  <li class="nav-item">
		    <a class="nav-link" id="participante-tab" data-toggle="tab" href="#participante" role="tab" aria-controls="participante" aria-selected="false">2. Datos del Participante</a>
		  </li>
		  <li class="nav-item" >
		    <a class="nav-link" id="trabajosfinales-tab" data-toggle="tab" href="#trabajosfinales" role="tab" aria-controls="trabajosfinales" aria-selected="false">3. Registro de Trabajos Finales</a>
		  </li>
		</ul>
		
		<div class="tab-content" id="myTabContent">	
			<div class="tab-pane fade show active" id="docente" role="tabpanel" aria-labelledby="docente-tab">
					  	<br><br>
					  	<div class="row">
					  		<div class="col-12 text-left">
					  			<strong>Código de local I.E.</strong>	
					  			<div class="ui-widget">
					  				<input type="hidden" th:value="${docentetutor.programaeducativo.id}" id="idprogramaeducativo" />
					  				<input type="hidden" th:value="${docentetutor.id}" id="id" />
					  				<input type="hidden" th:value="${docentetutor.anio}" id="anio" />
					  				<input type="text" id="codmod" style="width:100%" class="form-control" th:value="${codmod}" disabled />
					  			</div>
					  		</div>
					  	</div>
					  	<br>
						  <div class="row">
						  		<div class="col-4 text-left">
						  			<label>Apellido paterno</label>	
						  			<input type="text" id="appaterno" class="form-control" style="width:100%" th:field="*{docentetutor.appaterno}"/>
						  		</div>
						  		<div class="col-4 text-left">
						  			<label>Apellido materno</label>	
						  			<input type="text" id="apmaterno" class="form-control" style="width:100%" th:field="*{docentetutor.apmaterno}"/>
						  		</div>
						  		<div class="col-4 text-left">
						  			<label>Nombres</label>	
						  			<input type="text" id="nombre" class="form-control" style="width:100%" th:field="*{docentetutor.nombre}"/>
						  		</div>
						  </div>
						  <br>
						  <div class="row">
						  		<div class="col-4 text-left">
						  			<label>Tipo de documento</label>	
						  			<select class="form-control" id="tipodocumento" th:field="*{docentetutor.tipodocumento}">
						  				<option value="">Seleccione</option>
				                        <option th:each="len:${tipodoc}" th:value="${len.id}" th:utext="*{len.descripcion}"/>
						  			</select>
						  		</div>
						  		<div class="col-4 text-left">
						  			<label>N° de documento</label>	
						  			<input type="text" id="nrodocumento" style="width:100%" class="form-control" th:field="*{docentetutor.nrodocumento}"/>
						  		</div>
						  		<div class="col-4 text-left">
						  			<label>Género</label>	
						  			<select class="form-control" id="genero" th:field="*{docentetutor.genero}">
						  				<option value="">Seleccione</option>
				                        <option th:each="len:${genero}" th:value="${len.id}" th:utext="*{len.descripcion}"/>
						  			</select>
						  		</div>
						  </div>
						  <br>
						  <div class="row">
						  		<div class="col-4 text-left">
						  			<label>N° de teléfono</label>	
						  			<input type="text" id="nrotelefono" style="width:100%" class="form-control" th:field="*{docentetutor.nrotelefono}"/>
						  		</div>
						  		<div class="col-4 text-left">
						  			<label>Correo electrónico</label>	
						  			<input type="text" id="correoelectronico" style="width:100%" class="form-control" th:field="*{docentetutor.correoelectronico}"/>
						  		</div>
						  		<div class="col-4 text-left">
						  			<label>Responsable de registro</label>	
						  			<select class="form-control" id="responsable" th:field="*{docentetutor.responsable}">
						  				<option value="">Seleccione</option>
				                        <option th:each="len:${responsableregistro}" th:value="${len.id}" th:utext="*{len.descripcion}"/>
						  			</select>
						  		</div>
						  </div>
					  		<br>
						  <div class="row">
						  		<div class="col-4 text-left">
						  			<label>Curso</label>	
						  			<input type="text" id="curso" style="width:100%" class="form-control" th:field="*{docentetutor.curso}"/>
						  		</div>
						  		<div class="col-4">
						  			&nbsp;
						  		</div>
						  		<div class="col-4">
						  			&nbsp;
						  		</div>
						  </div>
						  <br>
						  	<div class="row">
						  		<div class="col-4">
						 				&nbsp;
						 			</div>
						 			<div class="col-4">
						 				<input type="button" value="Guardar" id="btnguardarficha" class="btn btn-primary text-white rounded-0"/>
								</div>
								<div class="col-4">
									<input type="button" value="Cancelar" id="btncancelarficha" class="btn btn-danger text-white rounded-0"/>
						 		</div>
						  	</div>
						  	<br><br><br>	  
			  	</div>
			<div class="tab-pane fade" id="participante" role="tabpanel" aria-labelledby="participante-tab">
				<div style="border-radius: 10px;padding-top:10px">
					Esta opción aún no se encuentra disponible, pronto se habilitará esta sección para el ingreso de datos de sus estudiantes participantes del Concurso, recuerda que debes adjuntar además la autorización de cada padre de familia junto con el registro. Descarga el formato de autorización <a href="/programaeducativo/reportes/AUTORIZACIÓNDEPADREPARAPARTICIPACIONVIIICONCURSO.docx" download style="color:blue">Aqu&iacute;</a>
					<br>
					<input type="button" value="Ir al inicio" id="inicioconcurso"/>
				</div>
			</div>		
			<div class="tab-pane fade show" id="trabajosfinales" role="tabpanel" aria-labelledby="trabajosfinales-tab" >			
			</div>
		</div>
	</div>
</div>
<div class="modal" tabindex="-1" role="dialog" id="modalexito">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <img th:src="@{./images/imagen_exito5.png}"/>&nbsp;&nbsp; <strong class="pt-1">Registro exitoso</strong>
      </div>
      <div class="modal-body" id="textoexito">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary rounded-0" id="btncerrarmensajeexito" name="btncerrarmensajeexito">Aceptar</button>
      </div>
    </div>
  </div>
</div>

<div class="modal" tabindex="-1" role="dialog" id="modalconfirmacion">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <img th:src="@{./images/imagen_informacion11.png}" />&nbsp;&nbsp; <strong class="pt-1">Confirmacion</strong>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id="textoconfirmacion">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary rounded-0" id="btnaceptarmensajeconfirmacion" name="btnaceptarmensajeconfirmacion">Aceptar</button>
        <button type="button" class="btn btn-danger rounded-0" id="btncerrarmensajeconfirmacion" name="btncerrarmensajeconfirmacion">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<div class="modal" tabindex="-1" role="dialog" id="modalinformacion">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <img th:src="@{./images/imagen_informacion11.png}" />&nbsp;&nbsp; <strong class="pt-1">Alerta</strong>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id="textoinformacion">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger rounded-0" id="btncerrarmensajeinformacion" name="btncerrarmensajeinformacion">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<div class="modal" tabindex="-1" role="dialog" id="modalerror">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <img th:src="@{./images/imagen_informacion11.png}"/>&nbsp;&nbsp; <strong class="pt-1">Error</strong>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>	          
        </button>
      </div>
      <div class="modal-body" id="textoerror">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger rounded-0" id="btncerrarmensajeerror" name="btncerrarmensajeerror">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<div class="modal" tabindex="-1" role="dialog" id="modalimagencargando">
  <center>
  	<img th:src="@{./images/cargando.gif}" style="line-height: 200px;"/>
  </center>	  
</div>	
</body>
</html>

<script type="text/javascript">
	
	var url_base = location.origin+"/";
	
	$(document).ready(function(){	
		
		$("#inicioconcurso1").click(function(){
			$("#container").html("<center><img src='./images/cargando.gif'/></center>");
			$.ajax({
				url: url_base + "programaeducativo/menu_concurso",
				success: function(respuesta) {
					$("#container").html(respuesta);
				},
				error: function() {
			        console.log("No se ha podido obtener la información");
			    }
			});
		});
		
		$("#inicioconcurso").click(function(){
			$("#container").html("<center><img src='./images/cargando.gif'/></center>");
			$.ajax({
				url: url_base + "programaeducativo/menu_concurso",
				success: function(respuesta) {
					$("#container").html(respuesta);
				},
				error: function() {
			        console.log("No se ha podido obtener la información");
			    }
			});
		});
		
		$("#fechanacimientoestudiante").datepicker({
			locale: 'es-es',
		    format: 'dd/mm/yyyy',
		    uiLibrary: 'bootstrap4'
		});
		
		$("#btnguardarficha").click(function(){
			
			var id = $("#id").val();
			var anio = $("#anio").val();
			var appaterno = $("#appaterno").val();
			var apmaterno = $("#apmaterno").val();
			var nombre = $("#nombre").val();
			var tipodocumento = $("#tipodocumento").val();
			var nrodocumento = $("#nrodocumento").val();
			var genero =  $("#genero").val();
			var nrotelefono =  $("#nrotelefono").val();
			var correoelectronico =  $("#correoelectronico").val();
			var responsable =  $("#responsable").val();
			var curso = $("#curso").val();
			var idprogramaeducativo = $("#idprogramaeducativo").val();
			
			var obj = {
					id: id,
					appaterno : appaterno,
					apmaterno : apmaterno,
					nombre : nombre,
					tipodocumento : {
						id :tipodocumento
					},
					nrodocumento : nrodocumento,
					genero : {
						id :genero 
					},
					nrotelefono : nrotelefono,
					correoelectronico : correoelectronico,
					responsable : {
						id :responsable
					},
					curso : curso,
					anio : anio,
					programaeducativo : {
						id : idprogramaeducativo
					}
			};	
			
			$.ajax({
				type : "POST",
			    contentType : "application/json",
			    url : url_base + "programaeducativo/guardardocentetutor",
			    data : JSON.stringify(obj),
			    dataType : 'json',
				success: function(respuesta) {
					
					switch(respuesta){
						case 0 : 
								$("#textoerror").html("Error al registrar Docente o tutor");
								$('#modalerror').modal({
									show : true,
									backdrop : 'static',
									keyboard:false
								});
								break;
						case 1 :  
							$("#textoexito").html("Se registro al Profesor o tutor exitosamente");
							$('#modalexito').modal({
								show : true,
								backdrop : 'static',
								keyboard:false
							});
							
							break;
					}
				},
				error: function() {
					$("#modalimagencargando").modal('hide');
					alert("Error al Registrarse en el Programa Educativo. Comunicarse con la Oficina de Tecnología de Información de Sunass");
			    }
			});	

		});
		
		$("#btncerrarmensajeexito").click(function(){
			$("#modalexito").modal('hide');
			
			$('#myTab a[href="#participante"]').tab('show');
			
		});	
	
	});
	
</script>